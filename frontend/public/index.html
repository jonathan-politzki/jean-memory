<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JEAN - Personal AI Memory</title>
    <link rel="stylesheet" href="css/styles.css">
    <!-- Google Sign-In API -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
    <div class="app-container">
        <div class="login-card">
            <div class="logo">
                <div class="logo-icon">J</div>
            </div>
            
            <div class="welcome-content">
                <h1>JEAN</h1>
                <p class="tagline">Your Personal AI Memory Layer</p>
                
                <div class="feature-list">
                    <div class="feature-item">
                        <span class="feature-icon">ðŸ§ </span>
                        <span>Enhance AI assistants with your personal context</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">ðŸ”„</span>
                        <span>Connect multiple data sources for better recall</span>
                    </div>
                    <div class="feature-item">
                        <span class="feature-icon">ðŸ”’</span>
                        <span>Privacy-first design - your data stays yours</span>
                    </div>
                </div>
                
                <div class="auth-container">
                    <p class="auth-label">Sign in to continue</p>
                    <div id="googleSignInButton" class="google-signin-button"></div>
                    <div id="errorMessage" class="error-message"></div>
                </div>
            </div>
            
            <div class="pulse-background"></div>
        </div>
        
        <footer>
            <p>Compatible with Claude Desktop, Cursor, and MCP-enabled AI tools</p>
        </footer>
    </div>

    <script>
        // Google Sign-In configuration
        function handleGoogleSignIn() {
            // Google OAuth client configuration
            // NOTE: You need to replace CLIENT_ID with your actual Google OAuth client ID
            const googleClientId = '276083385911-pjnkq5lij5pqk4duu4rlmfssr5212q8p.apps.googleusercontent.com';
            
            google.accounts.id.initialize({
                client_id: googleClientId,
                callback: handleCredentialResponse,
                auto_select: false,
                cancel_on_tap_outside: true
            });
            
            google.accounts.id.renderButton(
                document.getElementById('googleSignInButton'),
                { 
                    theme: 'filled_blue',
                    size: 'large',
                    text: 'continue_with',
                    shape: 'pill',
                    width: '280'
                }
            );
        }

        // Handle the Google Sign-In response
        function handleCredentialResponse(response) {
            // The response contains a credential with an ID token
            const id_token = response.credential; // Google now sends an id_token
            
            // Show loading state
            document.querySelector('.login-card').classList.add('loading');
            
            // Redirect to the frontend's proxy endpoint which expects a 'code' param
            // We'll pass the id_token as the 'code' for simplicity in this flow
            // NOTE: In a production app, you'd typically exchange the *authorization code* (not ID token) on the backend.
            // But for this setup where the frontend handles the pop-up, passing the ID token is common.
            // Our server.js expects 'code', so we send the token as 'code'.
            window.location.href = `/auth/google/callback?code=${id_token}`;
        }

        // Initialize when the page loads
        window.onload = function() {
            handleGoogleSignIn();
            
            // Animation for the pulse background
            const pulseBackground = document.querySelector('.pulse-background');
            setInterval(() => {
                pulseBackground.classList.add('pulse');
                setTimeout(() => {
                    pulseBackground.classList.remove('pulse');
                }, 1500);
            }, 3000);
        };
    </script>
</body>
</html> 